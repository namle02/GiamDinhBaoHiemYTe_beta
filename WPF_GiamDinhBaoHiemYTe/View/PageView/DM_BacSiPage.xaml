<UserControl
    x:Class="WPF_GiamDinhBaoHiem.View.PageView.DM_BacSiPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:local="clr-namespace:WPF_GiamDinhBaoHiem.View.PageView"
    xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    d:DesignHeight="800"
    d:DesignWidth="1200"
    mc:Ignorable="d">

    <UserControl.Resources>
        <!--  Style cho các button  -->
        <Style
            x:Key="ActionButtonStyle"
            BasedOn="{StaticResource MaterialDesignRaisedButton}"
            TargetType="Button">
            <Setter Property="Margin" Value="4" />
            <Setter Property="Padding" Value="16,8" />
            <Setter Property="FontSize" Value="12" />
            <Setter Property="Height" Value="36" />
        </Style>

        <!--  Style cho DataGrid  -->
        <Style
            x:Key="MaterialDataGridStyle"
            BasedOn="{StaticResource MaterialDesignDataGrid}"
            TargetType="DataGrid">
            <Setter Property="AutoGenerateColumns" Value="False" />
            <Setter Property="CanUserAddRows" Value="False" />
            <Setter Property="CanUserDeleteRows" Value="False" />
            <Setter Property="CanUserResizeRows" Value="False" />
            <Setter Property="GridLinesVisibility" Value="Horizontal" />
            <Setter Property="HeadersVisibility" Value="Column" />
            <Setter Property="SelectionMode" Value="Single" />
            <Setter Property="SelectionUnit" Value="FullRow" />
            <Setter Property="RowHeaderWidth" Value="0" />
            <Setter Property="Background" Value="White" />
            <Setter Property="BorderBrush" Value="{DynamicResource MaterialDesignDivider}" />
            <Setter Property="BorderThickness" Value="1" />
        </Style>
    </UserControl.Resources>

    <Grid Background="{DynamicResource MaterialDesignPaper}">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
            <RowDefinition Height="Auto" />
        </Grid.RowDefinitions>

        <!--  Header  -->
        <materialDesign:Card
            Grid.Row="0"
            Margin="16,16,16,8"
            Padding="16">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>

                <StackPanel Grid.Column="0">
                    <TextBlock
                        Foreground="{DynamicResource PrimaryHueMidBrush}"
                        Style="{DynamicResource MaterialDesignHeadline6TextBlock}"
                        Text="DANH MỤC BÁC SĨ" />
                    <TextBlock
                        Foreground="{DynamicResource MaterialDesignBodyLight}"
                        Style="{DynamicResource MaterialDesignBody2TextBlock}"
                        Text="Quản lý thông tin bác sĩ trong hệ thống" />
                </StackPanel>

                <StackPanel Grid.Column="1" Orientation="Horizontal">
                    <Button
                        Command="{Binding NhapExcelCommand}"
                        Foreground="{DynamicResource MaterialDesignFlatButtonForeground}"
                        Style="{StaticResource ActionButtonStyle}">
                        <StackPanel Orientation="Horizontal">
                            <materialDesign:PackIcon
                                Width="16"
                                Height="16"
                                Margin="0,0,4,0"
                                Kind="FileImport" />
                            <TextBlock Text="Nhập Excel" />
                        </StackPanel>
                    </Button>

                    <!-- Tra cứu đặt cạnh Nhập Excel -->
                    <Button
                     
                        Command="{Binding TimKiemCommand}"
                        Foreground="White"
                        Style="{StaticResource ActionButtonStyle}">
                        <StackPanel Orientation="Horizontal">
                            <materialDesign:PackIcon Width="16" Height="16" Margin="0,0,4,0" Kind="Magnify"/>
                            <TextBlock Text="Tra cứu" />
                        </StackPanel>
                    </Button>

                    <Button
                        Command="{Binding XuatExcelCommand}"
                        Foreground="{DynamicResource MaterialDesignFlatButtonForeground}"
                        Style="{StaticResource ActionButtonStyle}">
                        <StackPanel Orientation="Horizontal">
                            <materialDesign:PackIcon
                                Width="16"
                                Height="16"
                                Margin="0,0,4,0"
                                Kind="FileExport" />
                            <TextBlock Text="Xuất Excel" />
                        </StackPanel>
                    </Button>
                </StackPanel>
            </Grid>
        </materialDesign:Card>

        <!--  Search Panel (nhập ID hoặc Tên; hiển thị một bác sĩ)  -->
        <materialDesign:Card Grid.Row="1" Margin="16,8,16,8" Padding="16">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>
                
                <Grid Grid.Row="0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="Auto"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="Auto"/>
                    </Grid.ColumnDefinitions>

                    <materialDesign:PackIcon Grid.Column="0" Kind="Magnify" VerticalAlignment="Center" Margin="0,0,8,0"/>
                    <TextBox Grid.Column="1" Style="{StaticResource MaterialDesignOutlinedTextBox}"
                             materialDesign:HintAssist.Hint="Nhập mã bác sĩ hoặc tên bác sĩ, Enter để tra cứu"
                             Text="{Binding SearchText, UpdateSourceTrigger=PropertyChanged}">
                        <TextBox.InputBindings>
                            <KeyBinding Key="Enter" Command="{Binding TimKiemCommand}"/>
                        </TextBox.InputBindings>
                    </TextBox>
                </Grid>
                
                <!-- Status Message -->
                <TextBlock Grid.Row="1" Text="{Binding StatusMessage}" 
                           Foreground="{DynamicResource MaterialDesignBodyLight}"
                           Margin="0,8,0,0" HorizontalAlignment="Center"/>
            </Grid>
        </materialDesign:Card>

        <!--  Detail Card: đơn giản (giống style Thuốc)  -->
        <materialDesign:Card Grid.Row="2" Margin="16,8,16,8" Padding="16">
            <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled" MaxHeight="480">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="Auto"/>
                </Grid.RowDefinitions>

                <!-- Hàng 1: Mã NV | Tên NV | Ngày sinh -->
                <Grid Grid.Row="0" Margin="0,0,0,16">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="16"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="16"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <TextBox Grid.Column="0" Style="{StaticResource MaterialDesignOutlinedTextBox}"
                             materialDesign:HintAssist.Hint="Mã bác sĩ"
                             Text="{Binding SelectedBacSi.MaBacSi, Mode=TwoWay}"/>

                    <TextBox Grid.Column="2" Style="{StaticResource MaterialDesignOutlinedTextBox}"
                             materialDesign:HintAssist.Hint="Họ tên"
                             Text="{Binding SelectedBacSi.HoTen, Mode=TwoWay}"/>

                    <DatePicker Grid.Column="4" Style="{StaticResource MaterialDesignOutlinedDatePicker}"
                                materialDesign:HintAssist.Hint="Ngày sinh"
                                SelectedDate="{Binding SelectedBacSi.NgaySinh, Mode=TwoWay}"/>
                </Grid>

                <!-- Hàng 2: Giới tính | Địa chỉ | Email -->
                <Grid Grid.Row="1" Margin="0,0,0,16">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="16"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="16"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <TextBox Grid.Column="0" Style="{StaticResource MaterialDesignOutlinedTextBox}"
                             materialDesign:HintAssist.Hint="Giới tính"
                             Text="{Binding SelectedBacSi.GioiTinh, Mode=TwoWay}"/>

                    <TextBox Grid.Column="2" Style="{StaticResource MaterialDesignOutlinedTextBox}"
                             materialDesign:HintAssist.Hint="Địa chỉ"
                             Text="{Binding SelectedBacSi.DiaChi, Mode=TwoWay}"/>

                    <TextBox Grid.Column="4" Style="{StaticResource MaterialDesignOutlinedTextBox}"
                             materialDesign:HintAssist.Hint="Email"
                             Text="{Binding SelectedBacSi.Email, Mode=TwoWay}"/>
                </Grid>

                <!-- Hàng 3: Số điện thoại | Bằng cấp -->
                <Grid Grid.Row="2" Margin="0,0,0,16">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="16"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <TextBox Grid.Column="0" Style="{StaticResource MaterialDesignOutlinedTextBox}"
                             materialDesign:HintAssist.Hint="Số điện thoại"
                             Text="{Binding SelectedBacSi.SoDienThoai, Mode=TwoWay}"/>

                    <TextBox Grid.Column="2" Style="{StaticResource MaterialDesignOutlinedTextBox}"
                             materialDesign:HintAssist.Hint="Bằng cấp"
                             Text="{Binding SelectedBacSi.BangCap, Mode=TwoWay}"/>
                </Grid>
                
                <!-- Hàng 4: Chuyên khoa | Ngày vào làm | Trạng thái -->
                <Grid Grid.Row="3" Margin="0,16,0,0">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="16"/>
                        <ColumnDefinition Width="*"/>
                        <ColumnDefinition Width="16"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>
                    <TextBox Grid.Column="0" Style="{StaticResource MaterialDesignOutlinedTextBox}"
                             materialDesign:HintAssist.Hint="Chuyên khoa"
                             Text="{Binding SelectedBacSi.ChuyenKhoa, Mode=TwoWay}"/>
                    <DatePicker Grid.Column="2" Style="{StaticResource MaterialDesignOutlinedDatePicker}"
                                materialDesign:HintAssist.Hint="Ngày vào làm"
                                SelectedDate="{Binding SelectedBacSi.NgayVaoLam, Mode=TwoWay}"/>
                    <TextBox Grid.Column="4" Style="{StaticResource MaterialDesignOutlinedTextBox}"
                             materialDesign:HintAssist.Hint="Trạng thái (True/False)"
                             Text="{Binding SelectedBacSi.TrangThai, StringFormat='{}{0}'}"/>
                </Grid>
                
                <!-- Hàng 5: Ghi chú -->
                <Grid Grid.Row="4" Margin="0,16,0,0">
                    <TextBox Style="{StaticResource MaterialDesignOutlinedTextBox}"
                             materialDesign:HintAssist.Hint="Ghi chú"
                             Text="{Binding SelectedBacSi.GhiChu, Mode=TwoWay}"
                             AcceptsReturn="True" TextWrapping="Wrap" Height="120"/>
                </Grid>
            </Grid>
            </ScrollViewer>
        </materialDesign:Card>

        <!-- Bỏ form thao tác phức tạp để trang đơn giản như Thuốc -->
    </Grid>
</UserControl>
