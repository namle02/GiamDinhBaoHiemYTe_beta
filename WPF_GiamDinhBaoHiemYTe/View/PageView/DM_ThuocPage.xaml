<UserControl
    x:Class="WPF_GiamDinhBaoHiem.View.PageView.DM_ThuocPage"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:materialDesign="http://materialdesigninxaml.net/winfx/xaml/themes">
    <UserControl.Resources>
        <BooleanToVisibilityConverter x:Key="BoolToVis" />
    </UserControl.Resources>

    <Grid Background="{DynamicResource MaterialDesignPaper}">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto" />
            <RowDefinition Height="Auto" />
            <RowDefinition Height="*" />
        </Grid.RowDefinitions>

        <!--  Header  -->
        <materialDesign:Card
            Grid.Row="0"
            Margin="16,16,16,8"
            Padding="16">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>
                <StackPanel Grid.Column="0">
                    <TextBlock
                        Foreground="{DynamicResource PrimaryHueMidBrush}"
                        Style="{DynamicResource MaterialDesignHeadline6TextBlock}"
                        Text="DANH MỤC THUỐC" />
                    <TextBlock
                        Foreground="{DynamicResource MaterialDesignBodyLight}"
                        Style="{DynamicResource MaterialDesignBody2TextBlock}"
                        Text="Quản lý thông tin thuốc trong hệ thống" />
                </StackPanel>
                <Button
                    Grid.Column="1"
                    Height="32"
                    MinWidth="100"
                    HorizontalAlignment="Right"
                    VerticalAlignment="Center"
                    Command="{Binding TraCuuThuocCommand}"
                    Foreground="White"
                    Style="{StaticResource MaterialDesignRaisedButton}">
                    <TextBlock Text="Tra cứu" />
                </Button>
            </Grid>
        </materialDesign:Card>

        <!--  Search Panel  -->
        <materialDesign:Card
            Grid.Row="1"
            Margin="16,8,16,8"
            Padding="16">
            <Grid>
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto" />
                    <ColumnDefinition Width="*" />
                    <ColumnDefinition Width="Auto" />
                </Grid.ColumnDefinitions>

                <materialDesign:PackIcon
                    Grid.Column="0"
                    Margin="0,0,8,0"
                    VerticalAlignment="Center"
                    Kind="Magnify" />
                <TextBox
                    Grid.Column="1"
                    materialDesign:HintAssist.Hint="Nhập Duoc Id hoặc tên thuốc, Enter để tra cứu"
                    Style="{StaticResource MaterialDesignOutlinedTextBox}"
                    Text="{Binding DuocId, UpdateSourceTrigger=PropertyChanged}">


                    <TextBox.InputBindings>
                        <KeyBinding Key="Enter" Command="{Binding TraCuuThuocCommand}" />
                    </TextBox.InputBindings>

                </TextBox>

            </Grid>
        </materialDesign:Card>

        <!--  Detail Card (form style giống BacSiPage)  -->
        <materialDesign:Card
            Grid.Row="2"
            Margin="16,8,16,16"
            Padding="16">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                    <RowDefinition Height="Auto" />
                </Grid.RowDefinitions>

                <!--  Row 1  -->
                <Grid Grid.Row="0" Margin="0,0,0,16">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="16" />
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="16" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>

                    <TextBox
                        Grid.Column="0"
                        materialDesign:HintAssist.Hint="Mã dược"
                        Style="{StaticResource MaterialDesignOutlinedTextBox}"
                        Text="{Binding Thuoc.MaDuoc, Mode=TwoWay}" />

                    <TextBox
                        Grid.Column="2"
                        materialDesign:HintAssist.Hint="Tên dược"
                        Style="{StaticResource MaterialDesignOutlinedTextBox}"
                        Text="{Binding Thuoc.TenDuocDayDu, Mode=TwoWay}" />

                    <TextBox
                        Grid.Column="4"
                        materialDesign:HintAssist.Hint="Đơn vị tính"
                        Style="{StaticResource MaterialDesignOutlinedTextBox}"
                        Text="{Binding Thuoc.DonViTinh, Mode=TwoWay}" />
                </Grid>

                <!--  Row 2  -->
                <Grid Grid.Row="1" Margin="0,0,0,16">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="16" />
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="16" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>

                    <TextBox
                        Grid.Column="0"
                        materialDesign:HintAssist.Hint="Loại vật tư"
                        Style="{StaticResource MaterialDesignOutlinedTextBox}"
                        Text="{Binding Thuoc.TenLoaiVatTu, Mode=TwoWay}" />

                    <TextBox
                        Grid.Column="2"
                        materialDesign:HintAssist.Hint="Tên không dấu"
                        Style="{StaticResource MaterialDesignOutlinedTextBox}"
                        Text="{Binding Thuoc.TenKhongDau, Mode=TwoWay}" />

                    <TextBox
                        Grid.Column="4"
                        materialDesign:HintAssist.Hint="Tái sử dụng"
                        Style="{StaticResource MaterialDesignOutlinedTextBox}"
                        Text="{Binding Thuoc.TaiSuDung, Mode=TwoWay}" />
                </Grid>

                <!--  Row 3  -->
                <Grid Grid.Row="2">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="*" />
                        <ColumnDefinition Width="16" />
                        <ColumnDefinition Width="*" />
                    </Grid.ColumnDefinitions>

                    <TextBox
                        Grid.Column="0"
                        materialDesign:HintAssist.Hint="Phạm vi thanh toán"
                        Style="{StaticResource MaterialDesignOutlinedTextBox}"
                        Text="{Binding Thuoc.PhamViThanhToan_Id, Mode=TwoWay}" />

                    <TextBox
                        Grid.Column="2"
                        materialDesign:HintAssist.Hint="Thông tin thầu"
                        Style="{StaticResource MaterialDesignOutlinedTextBox}"
                        Text="{Binding Thuoc.ThongTinThau, Mode=TwoWay}" />
                </Grid>
            </Grid>
        </materialDesign:Card>

        <!--  Loading overlay  -->
        <Border
            Grid.RowSpan="3"
            Background="#33000000"
            Visibility="{Binding IsLoading, Converter={StaticResource BoolToVis}}">
            <StackPanel HorizontalAlignment="Center" VerticalAlignment="Center">
                <ProgressBar
                    Width="220"
                    Height="6"
                    IsIndeterminate="True" />
                <TextBlock Margin="0,8,0,0" Text="Đang tra cứu dược..." />
            </StackPanel>
        </Border>
    </Grid>
</UserControl>
